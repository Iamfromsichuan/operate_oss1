webpackJsonp([14],{293:function(e,t,a){a(937),a(938);var o=a(4)(a(939),a(940),"data-v-3c8f8972",null);o.options.__file="D:\\项目\\operate_oss\\src\\views\\Orders\\productShort.vue",o.esModule&&Object.keys(o.esModule).some(function(e){return"default"!==e&&"__esModule"!==e})&&console.error("named exports are not supported in *.vue files."),o.options.functional&&console.error("[vue-loader] productShort.vue: functional components are not supported with templates, they should use render functions."),e.exports=o.exports},937:function(e,t){},938:function(e,t){},939:function(e,t,a){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=a(96),r=o(s),i=a(14),n=o(i),l=a(7),d=o(l),c=a(62);t.default={computed:{name:function(){return 0==this.updateObj.systemSend?"关闭":"开启"},rename:function(){return 0==this.updateObj.systemSend?"开启":"关闭"}},data:function(){var e=this;return{modalRefuese:!1,switch1:!1,producstCode:[],checkedProducstCode:[],fromWays:[],provenCodes:[],shortType:[],shortWay:[],beforeChanged:"",lists:[],names:[],wscCode:"",loading:"",if_add:!0,collapseName:"",remark:"",initTime:(new Date).getFullYear()+"-"+((new Date).getMonth()+1)+"-"+(new Date).getDate(),filter:{pageNo:1,pageSize:c.pageSize,provinceCode:"",productCode:"",channelType:"",smsType:"",content:"",spCode:"",remarks:""},ruleValidate:{provinceCode:[{required:!0,message:" ",trigger:"blur"}],productCode:[{required:!0,message:" ",trigger:"change"}],channelType:[{required:!0,message:" ",trigger:"blur"}],smsType:[{required:!0,message:" ",trigger:"blur"}]},cityList:[],modalDelete:!1,passWord:"",modalAdd:!1,modal_loading:!1,formItem:{},dataLoading:!1,TotalRecords:0,updateObj:{ids:"",systemSend:""},columns:[{type:"selection",width:60,align:"center"},{title:"省份编码",align:"center",key:"provinceCode",render:function(t,a){for(var o="",s=0;s<e.provenCodes.length;s++)a.row.provinceCode==e.provenCodes[s].dictionaryCode&&(o=e.provenCodes[s].dictionaryName);return t("div",[t("Span",{},o)])}},{title:"产品类型",align:"center",key:"productName",render:function(t,a){for(var o="",s=0;s<e.producstCode.length;s++)a.row.productCode==e.producstCode[s].productCode&&(o=e.producstCode[s].productName);return t("div",[t("Span",{},o)])}},{title:"渠道类型",align:"center",key:"channelType"},{title:"短信类型",align:"center",key:"smsType"},{title:"短信内容",align:"center",key:"content",width:400},{title:"短信通道",align:"center",key:"spCode"},{title:"状态切换",align:"center",key:"systemSend",render:function(t,a){var o=e;return t("div",{},[t("Span",{},0==a.row.systemSend?"关闭":"开启"),t("Button",{props:{size:"small"},style:{marginLeft:"5px"},on:{click:function(){o.updateObj.ids=a.row.id,o.updateObj.systemSend=0==a.row.systemSend?1:0,o.modalRefuese=!0}}},[t("Icon",{props:{type:"refresh",color:"green",siz:40},style:{marginLeft:"5px"}})])])}},{title:"备注",align:"center",key:"remarks"},{title:"操作",key:"action",width:150,align:"center",render:function(t,a){return t("div",[t("Button",{props:{type:"warning",size:"small"},on:{click:function(){e.if_add=!1,e.formItem=(0,r.default)({},a.row),e.modalAdd=!0}}},"修改")])}}],datas:[],orderNos:"",checkedDatas:[],pageConfig:[8,10,15,18,20,300]}},methods:{updateStatus:function(){var e=this;e.dataLoading=!0,n.default.ajax.get(n.default.baseUrl+"/core/product/sms/editSmsStatus",{params:e.updateObj}).then(function(t){e.dataLoading=!1,t.status==c.ERR_OK?(console.log(t),e.$Message.success(t.data.msg),e.modalRefuese=!1,e.search(e.filter.pageNo)):e.$Message.error(t)}).catch(function(e){})},change:function(){},filterProductCode:function(e){this.checkedProducstCode=[];for(var t=0;t<this.producstCode.length;t++)this.producstCode[t].passagewayCode==e&&this.checkedProducstCode.push(this.producstCode[t]);console.log(this.checkedProducstCode)},showWscCode:function(e){for(var t=this,a=0;a<t.lists.length;a++)t.lists[a].name==e&&(t.filter.wscCode=t.lists[a].wscCode,t.formItem.wscCode=t.lists[a].wscCode)},changeValue:function(e){this.remark=e},changeComplainTime:function(e){this.filter.complainStartTime=e[0]?e[0]+" 00:00:00":"",this.filter.complainEndTime=e[1]?e[1]+" 23:59:59":""},changeOrderTime:function(e){this.filter.orderStartTime=e[0]?e[0]+" 00:00:00":"",this.filter.orderEndTime=e[1]?e[1]+" 23:59:59":""},search:function(e){if(this.filter.provinceCode){var t=this;this.filter.pageNo=e,this.dataLoading=!0,this.orderNos="",this.checkedDatas=[],n.default.ajax.get(n.default.baseUrl+"/core/product/sms/list",{params:this.filter}).then(function(e){t.wscCode="",t.dataLoading=!1,e.status==c.ERR_OK?(console.log(e.data.data.list),t.datas=e.data.data.list,t.TotalRecords=e.data.data.total):t.$Message.error(e)}).catch(function(e){console.log(e)})}else this.$Message.error("请先选择通道")},selectItem:function(e){this.checkedDatas=e;var t=[];e.length?(e.map(function(e){t.push(e.orderNo)}),this.orderNos=t.join(",")):this.orderNos=""},changePageSize:function(e){this.filter.pageSize=e,this.search(1)},changePage:function(e){this.search(e)},deleteShow:function(){return this.checkedDatas.length?this.checkedDatas.length>1?void this.$Message.warning("一次只能删除一条订单！"):(this.passWord="",void(this.modalDelete=!0)):void this.$Message.warning("请选择需要删除的订单！")},deleteItem:function(){var e=this;if(!this.passWord)return void this.$Message.warning("请验证当前账户密码！");this.modal_loading=!0;var t=[];if(e.checkedDatas.length>0)for(var a=0;a<e.checkedDatas.length;a++)t.push(e.checkedDatas[a].id);t+=",",t=t.substring(0,t.length-1);var o=d.default.get("user"),s=this.passWord;n.default.ajax.get(n.default.baseUrl+"/core/product/sms/delete",{params:{ids:t,userName:o,passWord:s}}).then(function(t){e.modal_loading=!1,t.data.status==c.ERR_OK?(e.$Message.success("删除成功！"),e.modalDelete=!1,e.search(e.filter.pageNo)):e.$Message.error(t.data.msg)}).catch(function(e){console.log(e)})},exportOut:function(){var e=n.default.baseUrl+"/core/product/sms/export?token="+d.default.get("token")+n.default.parseParam(this.filter);window.location.href=e},addShow:function(){this.modalAdd=!0,this.if_add=!0,this.formItem={customer:d.default.get("user"),provinceCode:"",productCode:"",channelType:"",smsType:"",content:"",remarks:"",spCode:""}},selectComplainTime:function(e){this.formItem.complainTime=e},selectOrderTime:function(e){this.formItem.orderTime=e},handleSubmit:function(e){var t=this,a=this.if_add?"/core/product/sms/add":"/core/product/sms/edit";this.$refs[e].validate(function(e){if(e){var o=t;t.modal_loading=!0,n.default.ajax.get(n.default.baseUrl+a,{params:o.formItem}).then(function(e){o.modal_loading=!1,e.data.status==c.ERR_OK?(o.$Message.success(e.data.msg),o.modalAdd=!1,o.search(1)):o.$Message.error(e.data.msg)}).catch(function(e){console.log(e)})}else t.$Message.error("请填写完整信息!")})},downloadFile:function(e){window.location.href=n.default.baseUrl+"/xjcu/refund/downFile.do?fileName="+e},getProvinceName:function(e,t){var a=this;n.default.ajax.get(n.default.baseUrl+"/system/data/dictionary/list",{params:{dictionaryType:e}}).then(function(e){a[t]=e.data,a.dataLoading=!1}).catch(function(e){console.log(e)})},search2:function(){var e=this,t={pageNo:1,pageSize:100};this.dataLoading=!0,n.default.ajax.get(n.default.baseUrl+"/core/channel/products/list",{params:t}).then(function(t){t.status==c.ERR_OK?(console.log(t),e.producstCode=t.data.data.list,e.dataLoading=!1):(e.$Message.error(t),e.dataLoading=!1)}).catch(function(e){console.log(e)})}},created:function(){var e=this;n.default.ajax.get(n.default.baseUrl+"/kdcu/online/provinceMap/list",{params:{isAll:5}}).then(function(t){e.lists=t.data.data.list;for(var a=0;a<e.lists.length;a++)e.names.push(e.lists[a].name)}),this.getProvinceName("短信通道编码","shortWay"),this.getProvinceName("短信类型","shortType"),this.getProvinceName("省份","provenCodes"),this.getProvinceName("渠道类型","fromWays"),this.search2()}}},940:function(e,t,a){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"complain_nation complain_nation_cs"},[a("Collapse",{staticStyle:{margin:"10px 0"},model:{value:e.collapseName,callback:function(t){e.collapseName=t},expression:"collapseName"}},[a("Panel",{attrs:{name:"1"}},[a("div",{staticStyle:{display:"inline-block",float:"left","margin-right":"10px"},on:{click:function(e){e.stopPropagation()}}},[a("Button",{attrs:{type:"success",icon:"plus"},on:{click:e.addShow}},[e._v("新增产品短信")]),e._v(" "),a("Button",{attrs:{type:"error",icon:"close"},on:{click:e.deleteShow}},[e._v("删除产品短信")]),e._v(" "),a("Button",{attrs:{type:"primary",icon:"ios-cloud-download"},on:{click:e.exportOut}},[e._v("导出")])],1),e._v(" "),a("div",{attrs:{slot:"content"},slot:"content"},[a("Select",{staticStyle:{width:"200px"},attrs:{clearable:"",filterable:"",placeholder:"请选择通道"},on:{"on-change":e.filterProductCode},model:{value:e.filter.provinceCode,callback:function(t){e.$set(e.filter,"provinceCode",t)},expression:"filter.provinceCode"}},e._l(e.provenCodes,function(t,o){return a("Option",{key:o,attrs:{value:t.dictionaryCode}},[e._v(e._s(t.dictionaryName))])})),e._v(" "),a("Select",{staticStyle:{width:"350px"},attrs:{clearable:"",filterable:"",placeholder:"请选择产品名称"},model:{value:e.filter.productCode,callback:function(t){e.$set(e.filter,"productCode",t)},expression:"filter.productCode"}},e._l(e.checkedProducstCode,function(t,o){return a("Option",{key:o,attrs:{value:t.productCode}},[e._v(e._s(t.productName))])})),e._v(" "),a("Select",{staticStyle:{width:"200px"},attrs:{clearable:"",filterable:"",placeholder:"请选择渠道类型"},model:{value:e.filter.channelType,callback:function(t){e.$set(e.filter,"channelType",t)},expression:"filter.channelType"}},e._l(e.fromWays,function(t,o){return a("Option",{key:o,attrs:{value:t.dictionaryCode}},[e._v(e._s(t.dictionaryCode))])})),e._v(" "),a("Select",{staticStyle:{width:"200px"},attrs:{clearable:"",filterable:"",placeholder:"请选择短信类型"},model:{value:e.filter.smsType,callback:function(t){e.$set(e.filter,"smsType",t)},expression:"filter.smsType"}},e._l(e.shortType,function(t,o){return a("Option",{key:o,attrs:{value:t.dictionaryName}},[e._v(e._s(t.dictionaryName))])})),e._v(" "),a("Select",{staticStyle:{width:"200px"},attrs:{clearable:"",filterable:"",placeholder:"请选择短信通道编码"},model:{value:e.filter.spCode,callback:function(t){e.$set(e.filter,"spCode",t)},expression:"filter.spCode"}},e._l(e.shortWay,function(t,o){return a("Option",{key:o,attrs:{value:t.dictionaryCode}},[e._v(e._s(t.dictionaryName))])})),e._v(" "),a("Button",{staticStyle:{float:"right"},attrs:{type:"primary",icon:"ios-search"},on:{click:function(t){e.search(1)}}},[e._v("查找")])],1)])],1),e._v(" "),a("Table",{attrs:{columns:e.columns,data:e.datas,loading:e.dataLoading,size:"small"},on:{"on-selection-change":e.selectItem}}),e._v(" "),a("br"),e._v(" "),a("br"),e._v(" "),a("div",{staticClass:"page"},[a("Page",{staticStyle:{display:"inline-block","vertical-align":"middle"},attrs:{total:e.TotalRecords,current:e.filter.pageNo,"page-size":e.filter.pageSize,"show-elevator":"","show-sizer":"",placement:"top","page-size-opts":e.pageConfig},on:{"on-change":e.changePage,"on-page-size-change":e.changePageSize}}),e._v(" "),a("div",{staticClass:"records",staticStyle:{display:"inline-block",height:"32px","line-height":"32px","margin-left":"5%"}},[e._v("\n            当前共"),a("span",{staticStyle:{color:"#f00","font-weight":"bold"}},[e._v(" "+e._s(e.TotalRecords)+" ")]),e._v("条记录，已选定"),a("span",{staticStyle:{color:"#f00","font-weight":"bold"}},[e._v(" "+e._s(e.checkedDatas.length)+" ")]),e._v("条记录\n        ")])],1),e._v(" "),a("Modal",{attrs:{width:"400","mask-closable":!1,"class-name":"vertical-center-modal modalAdd"},model:{value:e.modalAdd,callback:function(t){e.modalAdd=t},expression:"modalAdd"}},[a("p",{staticStyle:{color:"#f60","text-align":"center"},attrs:{slot:"header"},slot:"header"},[a("Icon",{attrs:{type:"information-circled"}}),e._v(" "),a("span",[e._v(e._s(e.if_add?"新增":"修改")+"产品短信")]),e._v(" "),a("span",{staticClass:"customer",staticStyle:{position:"absolute",right:"8%",color:"#333"}},[e._v("\n                客服: "+e._s(e.formItem.customer)+"\n            ")])],1),e._v(" "),a("div",[a("Form",{ref:"formValidate",staticStyle:{width:"100%",margin:"0 auto"},attrs:{model:e.formItem,rules:e.ruleValidate}},[a("FormItem",{directives:[{name:"show",rawName:"v-show",value:e.if_add,expression:"if_add"}],staticStyle:{width:"100%","margin-bottom":"10px"},attrs:{prop:"productCode"}},[a("Select",{attrs:{filterable:"",placeholder:"请选择产品类型"},model:{value:e.formItem.productCode,callback:function(t){e.$set(e.formItem,"productCode",t)},expression:"formItem.productCode"}},e._l(e.producstCode,function(t,o){return a("Option",{key:o,attrs:{value:t.productCode}},[e._v(e._s(t.productName))])}))],1),e._v(" "),a("FormItem",{directives:[{name:"show",rawName:"v-show",value:!e.if_add,expression:"!if_add"}],staticStyle:{width:"100%","margin-bottom":"10px"},attrs:{prop:"productCode"}},[a("Input",{staticStyle:{width:"100%"},attrs:{disabled:"",placeholder:"请选择产品类型"},model:{value:e.formItem.productCode,callback:function(t){e.$set(e.formItem,"productCode",t)},expression:"formItem.productCode"}})],1),e._v(" "),a("FormItem",{directives:[{name:"show",rawName:"v-show",value:e.if_add,expression:"if_add"}],staticStyle:{width:"100%","margin-bottom":"10px"},attrs:{prop:"channelType"}},[a("Select",{attrs:{filterable:"",placeholder:"请选择渠道类型"},model:{value:e.formItem.channelType,callback:function(t){e.$set(e.formItem,"channelType",t)},expression:"formItem.channelType"}},e._l(e.fromWays,function(t,o){return a("Option",{key:o,attrs:{value:t.dictionaryCode}},[e._v(e._s(t.dictionaryCode))])}))],1),e._v(" "),a("FormItem",{directives:[{name:"show",rawName:"v-show",value:!e.if_add,expression:"!if_add"}],staticStyle:{width:"100%","margin-bottom":"10px"},attrs:{prop:"channelType"}},[a("Input",{staticStyle:{width:"100%"},attrs:{disabled:"",placeholder:"请选择渠道类型"},model:{value:e.formItem.channelType,callback:function(t){e.$set(e.formItem,"channelType",t)},expression:"formItem.channelType"}})],1),e._v(" "),a("FormItem",{directives:[{name:"show",rawName:"v-show",value:e.if_add,expression:"if_add"}],staticStyle:{width:"100%","margin-bottom":"10px"}},[a("Select",{attrs:{filterable:"",placeholder:"请选择省份"},model:{value:e.formItem.provinceCode,callback:function(t){e.$set(e.formItem,"provinceCode",t)},expression:"formItem.provinceCode"}},e._l(e.provenCodes,function(t,o){return a("Option",{key:o,attrs:{value:t.dictionaryCode}},[e._v(e._s(t.dictionaryName))])}))],1),e._v(" "),a("FormItem",{directives:[{name:"show",rawName:"v-show",value:!e.if_add,expression:"!if_add"}],staticStyle:{width:"100%","margin-bottom":"10px"},attrs:{prop:"provinceCode"}},[a("Input",{staticStyle:{width:"100%"},attrs:{disabled:"",placeholder:"请选择省份"},model:{value:e.formItem.provinceCode,callback:function(t){e.$set(e.formItem,"provinceCode",t)},expression:"formItem.provinceCode"}})],1),e._v(" "),a("FormItem",{directives:[{name:"show",rawName:"v-show",value:e.if_add,expression:"if_add"}],staticStyle:{width:"100%","margin-bottom":"10px"}},[a("Select",{attrs:{filterable:"",placeholder:"请选择短信类型"},model:{value:e.formItem.smsType,callback:function(t){e.$set(e.formItem,"smsType",t)},expression:"formItem.smsType"}},e._l(e.shortType,function(t,o){return a("Option",{key:o,attrs:{value:t.dictionaryName}},[e._v(e._s(t.dictionaryName))])}))],1),e._v(" "),a("FormItem",{directives:[{name:"show",rawName:"v-show",value:!e.if_add,expression:"!if_add"}],staticStyle:{width:"100%","margin-bottom":"10px"}},[a("Input",{staticStyle:{width:"100%"},attrs:{disabled:"",placeholder:"请选择短信类型"},model:{value:e.formItem.smsType,callback:function(t){e.$set(e.formItem,"smsType",t)},expression:"formItem.smsType"}})],1),e._v(" "),a("FormItem",{directives:[{name:"show",rawName:"v-show",value:e.if_add,expression:"if_add"}],staticStyle:{width:"100%","margin-bottom":"10px"}},[a("Select",{attrs:{filterable:"",placeholder:"请选择短信通道编码"},model:{value:e.formItem.spCode,callback:function(t){e.$set(e.formItem,"spCode",t)},expression:"formItem.spCode"}},e._l(e.shortWay,function(t,o){return a("Option",{key:o,attrs:{value:t.dictionaryCode}},[e._v(e._s(t.dictionaryName))])}))],1),e._v(" "),a("FormItem",{directives:[{name:"show",rawName:"v-show",value:!e.if_add,expression:"!if_add"}],staticStyle:{width:"100%","margin-bottom":"10px"}},[a("Input",{staticStyle:{width:"100%"},attrs:{disabled:"",placeholder:"请选择短信通道编码"},model:{value:e.formItem.spCode,callback:function(t){e.$set(e.formItem,"spCode",t)},expression:"formItem.spCode"}})],1),e._v(" "),a("FormItem",{staticStyle:{width:"100%","margin-bottom":"10px"}},[a("span",[e._v("短信内容：")]),a("br"),e._v(" "),a("Input",{attrs:{type:"textarea",rows:4,placeholder:"请输入短信内容"},model:{value:e.formItem.content,callback:function(t){e.$set(e.formItem,"content",t)},expression:"formItem.content"}})],1),e._v(" "),a("FormItem",{staticStyle:{width:"100%","margin-bottom":"10px"}},[a("span",[e._v("备注：")]),a("br"),e._v(" "),a("Input",{attrs:{type:"textarea",rows:1,placeholder:"请输入备注"},model:{value:e.formItem.remarks,callback:function(t){e.$set(e.formItem,"remarks",t)},expression:"formItem.remarks"}})],1)],1)],1),e._v(" "),a("div",{staticStyle:{"text-align":"right"},attrs:{slot:"footer"},slot:"footer"},[a("Button",{attrs:{type:"success",loading:e.modal_loading},on:{click:function(t){e.handleSubmit("formValidate")}}},[e._v("提交")]),e._v(" "),a("Button",{staticStyle:{"margin-left":"8px"},attrs:{type:"ghost"},on:{click:function(t){e.modalAdd=!1}}},[e._v("取消")])],1)]),e._v(" "),a("Modal",{attrs:{width:"320"},model:{value:e.modalDelete,callback:function(t){e.modalDelete=t},expression:"modalDelete"}},[a("p",{staticStyle:{color:"#f60","text-align":"center"},attrs:{slot:"header"},slot:"header"},[a("Icon",{attrs:{type:"information-circled"}}),e._v(" "),a("span",[e._v("删除订单")])],1),e._v(" "),a("div",{staticStyle:{"text-align":"center"}},[a("Input",{attrs:{type:"password",autosize:!0,placeholder:"请验证当前用户密码"},model:{value:e.passWord,callback:function(t){e.passWord=t},expression:"passWord"}})],1),e._v(" "),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("Button",{attrs:{type:"primary",size:"large",long:"",loading:e.modal_loading},on:{click:e.deleteItem}},[e._v("确认")])],1)]),e._v(" "),a("Modal",{attrs:{width:"320"},model:{value:e.modalRefuese,callback:function(t){e.modalRefuese=t},expression:"modalRefuese"}},[a("p",{staticStyle:{color:"#f60","text-align":"center"},attrs:{slot:"header"},slot:"header"},[a("Icon",{attrs:{type:"information-circled"}}),e._v(" "),a("span",[e._v("状态更改")])],1),e._v(" "),a("div",{staticStyle:{"text-align":"center"}},[a("p",[e._v("确定将状态由 "),a("span",{staticStyle:{"font-size":"16px",color:"red"}},[e._v(e._s(e.rename))]),e._v("  变为"),a("span",{staticStyle:{"font-size":"16px",color:"red"}},[e._v(e._s(e.name))]),e._v(" 吗")])]),e._v(" "),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("Button",{attrs:{type:"primary",size:"large",long:"",loading:e.modal_loading},on:{click:e.updateStatus}},[e._v("确认")])],1)])],1)},staticRenderFns:[]},e.exports.render._withStripped=!0}});