webpackJsonp([14],{291:function(e,t,a){a(910),a(911);var l=a(4)(a(912),a(913),"data-v-bb377024",null);l.options.__file="D:\\项目\\operate_oss\\src\\views\\BusinessTrigger\\config.vue",l.esModule&&Object.keys(l.esModule).some(function(e){return"default"!==e&&"__esModule"!==e})&&console.error("named exports are not supported in *.vue files."),l.options.functional&&console.error("[vue-loader] config.vue: functional components are not supported with templates, they should use render functions."),e.exports=l.exports},910:function(e,t){},911:function(e,t){},912:function(e,t,a){"use strict";function l(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=a(96),i=l(s),o=a(14),r=l(o),n=a(7),d=l(n),c=a(62);t.default={data:function(){var e=this;return{byte:"",InputList:[],beforeChanged:"",lists:[],names:[],wscCode:"",loading:"",if_add:!0,collapseName:"1",remark:"",initTime:(new Date).getFullYear()+"-"+((new Date).getMonth()+1)+"-"+(new Date).getDate(),ruleValidate:{tableName:[{required:!0,message:" ",trigger:"blur"}],tableType:[{required:!0,message:" ",trigger:"change"}],tableTitle:[{required:!0,message:" ",trigger:"blur"}]},cityList:[],modalDelete:!1,passWord:"",modalAdd:!1,modal_loading:!1,formItem:{},dataLoading:!1,filter:{pageNo:1,pageSize:c.pageSize,id:"",tableName:"",tableType:"",tableTitle:"",tableField:"",remarks:""},TotalRecords:0,columns:[{type:"selection",width:60,align:"center"},{title:"表名",align:"center",key:"tableName"},{title:"黑白名单类型",align:"center",key:"tableType"},{title:"表标题",align:"center",key:"tableTitle"},{title:"表字段",align:"center",key:"tableField"},{title:"备注",align:"center",key:"remarks"},{title:"Action",key:"action",width:150,align:"center",render:function(t,a){return t("div",[t("Button",{props:{type:"warning",size:"small"},on:{click:function(){var t=e;e.if_add=!1;var l=a.index;e.beforeChanged=t.datas[l],e.InputList=a.row.tableField.split(","),e.formItem=(0,i.default)({},a.row),e.modalAdd=!0}}},"修改")])}}],datas:[],orderNos:"",checkedDatas:[],pageConfig:[8,10,15,18,20,300]}},methods:{cancle:function(e){this.InputList.splice(e,1)},addInput:function(){this.byte?(this.InputList.push(this.byte),console.log(this.InputList),this.byte=null):this.$Message.error("请输入需要添加的字段")},showWscCode:function(e){for(var t=this,a=0;a<t.lists.length;a++)t.lists[a].name==e&&(t.filter.wscCode=t.lists[a].wscCode,t.formItem.wscCode=t.lists[a].wscCode)},changeValue:function(e){this.remark=e},changeComplainTime:function(e){this.filter.complainStartTime=e[0]?e[0]+" 00:00:00":"",this.filter.complainEndTime=e[1]?e[1]+" 23:59:59":""},changeOrderTime:function(e){this.filter.orderStartTime=e[0]?e[0]+" 00:00:00":"",this.filter.orderEndTime=e[1]?e[1]+" 23:59:59":""},search:function(e){var t=this;this.filter.pageNo=e,this.dataLoading=!0,this.orderNos="",this.checkedDatas=[],r.default.ajax.get(r.default.baseUrl+"/black/white/config/list",{params:this.filter}).then(function(e){if(t.wscCode="",t.dataLoading=!1,e.data.status==c.ERR_OK){for(var a=0;a<e.data.data.list.length;a++)0==e.data.data.list[a].isEnable?e.data.data.list[a].isEnable="关闭":1==e.data.data.list[a].isEnable&&(e.data.data.list[a].isEnable="开启"),"NO"==e.data.data.list[a].flagType&&(e.data.data.list[a].flagType="未配置");t.wscCodes=[],t.filter.wscCode="",t.datas=e.data.data.list;for(var l=0;l<t.datas.length;l++)t.wscCodes.push(t.datas[l].wscCode);t.TotalRecords=e.data.data.total}else t.$Message.error(e.data.msg)}).catch(function(e){console.log(e)})},selectItem:function(e){this.checkedDatas=e;var t=[];e.length?(e.map(function(e){t.push(e.orderNo)}),this.orderNos=t.join(",")):this.orderNos=""},changePageSize:function(e){this.filter.pageSize=e,this.search(1)},changePage:function(e){this.search(e)},deleteShow:function(){if(!this.checkedDatas.length)return void this.$Message.warning("请选择需要删除的订单！");this.passWord="",this.modalDelete=!0},deleteItem:function(){var e=this;if(!this.passWord)return void this.$Message.warning("请验证当前账户密码！");this.modal_loading=!0;var t=[];if(e.checkedDatas.length>0)for(var a=0;a<e.checkedDatas.length;a++)t.push(e.checkedDatas[a].id);t+=",",t=t.substring(0,t.length-1);var l=d.default.get("user"),s=this.passWord;r.default.ajax.get(r.default.baseUrl+"/black/white/config/delete",{params:{ids:t,userName:l,passWord:s}}).then(function(t){e.modal_loading=!1,t.data.status==c.ERR_OK?(e.$Message.success("删除成功！"),e.modalDelete=!1,e.search(e.filter.pageNo)):e.$Message.error(t.data.msg)}).catch(function(e){console.log(e)})},addShow:function(){this.InputList=[],this.formItem={customer:d.default.get("user"),id:"",tableName:"",tableType:"",tableTitle:"",tableField:"",remarks:""},this.if_add=!0,this.modalAdd=!0,console.log(this.formItem)},selectComplainTime:function(e){this.formItem.complainTime=e},selectOrderTime:function(e){this.formItem.orderTime=e},handleSubmit:function(e){var t=this,a=this.if_add?"/black/white/config/add":"/black/white/config/edit",l=this;this.$refs[e].validate(function(e){if(console.log(e),e)if(0==t.InputList.length)l.$Message.error("请至少添加一个字段");else if(l.formItem.tableType)if(l.formItem.tableTitle)if(t.InputList.length>0){for(var s=0;s<t.InputList.length;s++)l.formItem.tableField=0==s?t.InputList[0]:l.formItem.tableField+","+t.InputList[s];t.modal_loading=!0,r.default.ajax.get(r.default.baseUrl+a,{params:l.formItem}).then(function(e){l.modal_loading=!1,e.data.status==c.ERR_OK?(l.$Message.success(e.data.msg),l.modalAdd=!1,l.filter.wscCode="",l.search(1)):l.$Message.error(e.data.msg)}).catch(function(e){console.log(e)})}else l.$Message.error("请至少添加一个表字段");else l.$Message.error("请输入表名");else l.$Message.error("请选择表的类型");else t.$Message.error("请填写完整信息!")})},downloadFile:function(e){window.location.href=r.default.baseUrl+"/xjcu/refund/downFile.do?fileName="+e}},created:function(){this.search(1);var e=this;r.default.ajax.get(r.default.baseUrl+"/kdcu/online/provinceMap/list",{params:{isAll:5}}).then(function(t){e.lists=t.data.data.list;for(var a=0;a<e.lists.length;a++)e.names.push(e.lists[a].name)})}}},913:function(e,t,a){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"complain_nation"},[a("Collapse",{staticStyle:{margin:"10px 0"},model:{value:e.collapseName,callback:function(t){e.collapseName=t},expression:"collapseName"}},[a("Panel",{attrs:{name:"1"}},[a("div",{staticStyle:{display:"inline-block",float:"left","margin-right":"10px"},on:{click:function(e){e.stopPropagation()}}},[a("Button",{attrs:{type:"success",icon:"plus"},on:{click:e.addShow}},[e._v("新增黑白名单表")]),e._v(" "),a("Button",{attrs:{type:"error",icon:"close"},on:{click:e.deleteShow}},[e._v("删除黑白名单表")])],1),e._v(" "),a("div",{attrs:{slot:"content"},slot:"content"},[a("Input",{staticStyle:{width:"200px"},attrs:{placeholder:"请输入：表名",clearable:""},model:{value:e.filter.tableName,callback:function(t){e.$set(e.filter,"tableName",t)},expression:"filter.tableName"}}),e._v(" "),a("Input",{staticStyle:{width:"200px"},attrs:{placeholder:"请输入：黑白名单类型",clearable:""},model:{value:e.filter.tableType,callback:function(t){e.$set(e.filter,"tableType",t)},expression:"filter.tableType"}}),e._v(" "),a("Input",{staticStyle:{width:"200px"},attrs:{placeholder:"请输入：表标题",clearable:""},model:{value:e.filter.tableTitle,callback:function(t){e.$set(e.filter,"tableTitle",t)},expression:"filter.tableTitle"}}),e._v(" "),a("Button",{staticStyle:{float:"right"},attrs:{type:"primary",icon:"ios-search"},on:{click:function(t){e.search(1)}}},[e._v("查找")])],1)])],1),e._v(" "),a("Table",{attrs:{columns:e.columns,data:e.datas,loading:e.dataLoading,size:"small"},on:{"on-selection-change":e.selectItem}}),e._v(" "),a("br"),e._v(" "),a("br"),e._v(" "),a("div",{staticClass:"page"},[a("Page",{staticStyle:{display:"inline-block","vertical-align":"middle"},attrs:{total:e.TotalRecords,current:e.filter.pageNo,"page-size":e.filter.pageSize,"show-elevator":"","show-sizer":"",placement:"top","page-size-opts":e.pageConfig},on:{"on-change":e.changePage,"on-page-size-change":e.changePageSize}}),e._v(" "),a("div",{staticClass:"records",staticStyle:{display:"inline-block",height:"32px","line-height":"32px","margin-left":"5%"}},[e._v("\n            当前共"),a("span",{staticStyle:{color:"#f00","font-weight":"bold"}},[e._v(" "+e._s(e.TotalRecords)+" ")]),e._v("条记录，已选定"),a("span",{staticStyle:{color:"#f00","font-weight":"bold"}},[e._v(" "+e._s(e.checkedDatas.length)+" ")]),e._v("条记录\n        ")])],1),e._v(" "),a("Modal",{attrs:{width:"660","mask-closable":!1,"class-name":"vertical-center-modal modalAdd"},model:{value:e.modalAdd,callback:function(t){e.modalAdd=t},expression:"modalAdd"}},[a("p",{staticStyle:{color:"#f60","text-align":"center"},attrs:{slot:"header"},slot:"header"},[a("Icon",{attrs:{type:"information-circled"}}),e._v(" "),a("span",[e._v(e._s(e.if_add?"新增表":"修改表配置"))]),e._v(" "),a("span",{staticClass:"customer",staticStyle:{position:"absolute",right:"8%",color:"#333"}},[e._v("\n                客服: "+e._s(e.formItem.customer)+"\n            ")])],1),e._v(" "),a("div",[a("Form",{ref:"formValidate",staticStyle:{width:"100%",margin:"0 auto"},attrs:{model:e.formItem,rules:e.if_add?e.ruleValidate:{},"label-width":120}},[a("FormItem",{directives:[{name:"show",rawName:"v-show",value:e.if_add,expression:"if_add"}],staticStyle:{width:"60%"},attrs:{prop:"tableName",label:"表名"}},[a("Input",{attrs:{placeholder:"表名"},model:{value:e.formItem.tableName,callback:function(t){e.$set(e.formItem,"tableName",t)},expression:"formItem.tableName"}})],1),e._v(" "),a("FormItem",{directives:[{name:"show",rawName:"v-show",value:!e.if_add,expression:"!if_add"}],staticStyle:{width:"60%"},attrs:{label:"表名"}},[a("Input",{attrs:{disabled:"",placeholder:"表名"},model:{value:e.formItem.tableName,callback:function(t){e.$set(e.formItem,"tableName",t)},expression:"formItem.tableName"}})],1),e._v(" "),a("FormItem",{directives:[{name:"show",rawName:"v-show",value:e.if_add,expression:"if_add"}],attrs:{prop:"tableType",label:"tableType"}},[a("Select",{staticStyle:{width:"100px"},attrs:{filterable:"",clearable:!0,placeholder:"表类型"},on:{"on-change":e.showWscCode},model:{value:e.formItem.tableType,callback:function(t){e.$set(e.formItem,"tableType",t)},expression:"formItem.tableType"}},[a("Option",{attrs:{value:"黑名单"}},[e._v("黑名单")]),e._v(" "),a("Option",{attrs:{value:"白名单"}},[e._v("白名单")])],1)],1),e._v(" "),a("FormItem",{directives:[{name:"show",rawName:"v-show",value:!e.if_add,expression:"!if_add"}],attrs:{label:"tableType",placeholder:e.formItem.tableType}},[a("Select",{staticStyle:{width:"100px"},attrs:{filterable:"",clearable:!0,placeholder:"表类型"},on:{"on-change":e.showWscCode},model:{value:e.formItem.tableType,callback:function(t){e.$set(e.formItem,"tableType",t)},expression:"formItem.tableType"}},[a("Option",{attrs:{value:"黑名单"}},[e._v("黑名单")]),e._v(" "),a("Option",{attrs:{value:"白名单"}},[e._v("白名单")])],1)],1),e._v(" "),a("FormItem",{directives:[{name:"show",rawName:"v-show",value:e.if_add,expression:"if_add"}],staticStyle:{width:"60%"},attrs:{prop:"tableTitle",label:"表标题"}},[a("Input",{attrs:{placeholder:"表标题"},model:{value:e.formItem.tableTitle,callback:function(t){e.$set(e.formItem,"tableTitle",t)},expression:"formItem.tableTitle"}})],1),e._v(" "),a("FormItem",{directives:[{name:"show",rawName:"v-show",value:!e.if_add,expression:"!if_add"}],staticStyle:{width:"60%"},attrs:{label:"表标题"}},[a("Input",{attrs:{placeholder:"表标题"},model:{value:e.formItem.tableTitle,callback:function(t){e.$set(e.formItem,"tableTitle",t)},expression:"formItem.tableTitle"}})],1),e._v(" "),a("FormItem",{staticStyle:{width:"100%"},attrs:{label:"表字段"}},[e._l(e.InputList,function(t,l){return a("div",{staticClass:"vol",staticStyle:{display:"inline-block"}},[a("Input",{staticStyle:{width:"120px"},attrs:{disabled:!0,icon:"ios-trash-outline",value:t,placeholder:"表字段"},on:{"on-click":function(t){e.cancle(l)}}})],1)}),e._v(" "),a("div",[a("Input",{staticStyle:{width:"40%"},attrs:{clearable:"",placeholder:"请输入表中所需字段"},model:{value:e.byte,callback:function(t){e.byte=t},expression:"byte"}}),a("Button",{attrs:{icon:"plus"},on:{click:e.addInput}})],1)],2),e._v(" "),a("FormItem",{staticStyle:{width:"60%"},attrs:{label:"备注"}},[a("Input",{attrs:{placeholder:"备注"},model:{value:e.formItem.remarks,callback:function(t){e.$set(e.formItem,"remarks",t)},expression:"formItem.remarks"}})],1)],1)],1),e._v(" "),a("div",{staticStyle:{"text-align":"right"},attrs:{slot:"footer"},slot:"footer"},[a("Button",{attrs:{type:"success",loading:e.modal_loading},on:{click:function(t){e.handleSubmit("formValidate")}}},[e._v("提交")]),e._v(" "),a("Button",{staticStyle:{"margin-left":"8px"},attrs:{type:"ghost"},on:{click:function(t){e.modalAdd=!1}}},[e._v("取消")])],1)]),e._v(" "),a("Modal",{attrs:{width:"320"},model:{value:e.modalDelete,callback:function(t){e.modalDelete=t},expression:"modalDelete"}},[a("p",{staticStyle:{color:"#f60","text-align":"center"},attrs:{slot:"header"},slot:"header"},[a("Icon",{attrs:{type:"information-circled"}}),e._v(" "),a("span",[e._v("删除订单")])],1),e._v(" "),a("div",{staticStyle:{"text-align":"center"}},[a("Input",{attrs:{type:"password",autosize:!0,placeholder:"请验证当前用户密码"},model:{value:e.passWord,callback:function(t){e.passWord=t},expression:"passWord"}})],1),e._v(" "),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("Button",{attrs:{type:"primary",size:"large",long:"",loading:e.modal_loading},on:{click:e.deleteItem}},[e._v("确认")])],1)])],1)},staticRenderFns:[]},e.exports.render._withStripped=!0}});