webpackJsonp([14],{298:function(e,t,o){o(957),o(958);var a=o(4)(o(959),o(960),"data-v-3c8f8972",null);a.options.__file="D:\\项目\\operate_oss\\src\\views\\Orders\\productShort.vue",a.esModule&&Object.keys(a.esModule).some(function(e){return"default"!==e&&"__esModule"!==e})&&console.error("named exports are not supported in *.vue files."),a.options.functional&&console.error("[vue-loader] productShort.vue: functional components are not supported with templates, they should use render functions."),e.exports=a.exports},957:function(e,t){},958:function(e,t){},959:function(e,t,o){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=o(96),s=a(r),i=o(14),n=a(i),l=o(7),d=a(l),c=o(62);t.default={data:function(){var e=this;return{producstCode:[],checkedProducstCode:[],fromWays:[],provenCodes:[],shortType:[],shortWay:[],beforeChanged:"",lists:[],names:[],wscCode:"",loading:"",if_add:!0,collapseName:"1",remark:"",initTime:(new Date).getFullYear()+"-"+((new Date).getMonth()+1)+"-"+(new Date).getDate(),filter:{pageNo:1,pageSize:c.pageSize,provinceCode:"",productCode:"",channelType:"",smsType:"",content:"",spCode:"",remarks:""},ruleValidate:{provinceCode:[{required:!0,message:" ",trigger:"blur"}],productCode:[{required:!0,message:" ",trigger:"change"}],channelType:[{required:!0,message:" ",trigger:"blur"}],smsType:[{required:!0,message:" ",trigger:"blur"}]},cityList:[],modalDelete:!1,passWord:"",modalAdd:!1,modal_loading:!1,formItem:{},dataLoading:!1,TotalRecords:0,columns:[{type:"selection",width:60,align:"center"},{title:"省份编码",align:"center",key:"provinceCode",render:function(t,o){for(var a="",r=0;r<e.provenCodes.length;r++)o.row.provinceCode==e.provenCodes[r].dictionaryCode&&(a=e.provenCodes[r].dictionaryName);return t("div",[t("Span",{},a)])}},{title:"产品类型",align:"center",key:"productCode",render:function(t,o){for(var a="",r=0;r<e.producstCode.length;r++)o.row.productCode==e.producstCode[r].productCode&&(a=e.producstCode[r].productName);return t("div",[t("Span",{},a)])}},{title:"渠道类型",align:"center",key:"channelType"},{title:"短信类型",align:"center",key:"smsType"},{title:"短信内容",align:"center",key:"content",width:400},{title:"短信通道",align:"center",key:"spCode"},{title:"备注",align:"center",key:"remarks"},{title:"操作",key:"action",width:150,align:"center",render:function(t,o){return t("div",[t("Button",{props:{type:"warning",size:"small"},on:{click:function(){e.if_add=!1,e.formItem=(0,s.default)({},o.row),e.modalAdd=!0}}},"修改")])}}],datas:[],orderNos:"",checkedDatas:[],pageConfig:[8,10,15,18,20,300]}},methods:{filterProductCode:function(e){this.checkedProducstCode=[];for(var t=0;t<this.producstCode.length;t++)this.producstCode[t].passagewayCode===e&&this.checkedProducstCode.push(this.producstCode[t]);console.log(this.checkedProducstCode.length)},showWscCode:function(e){for(var t=this,o=0;o<t.lists.length;o++)t.lists[o].name==e&&(t.filter.wscCode=t.lists[o].wscCode,t.formItem.wscCode=t.lists[o].wscCode)},changeValue:function(e){this.remark=e},changeComplainTime:function(e){this.filter.complainStartTime=e[0]?e[0]+" 00:00:00":"",this.filter.complainEndTime=e[1]?e[1]+" 23:59:59":""},changeOrderTime:function(e){this.filter.orderStartTime=e[0]?e[0]+" 00:00:00":"",this.filter.orderEndTime=e[1]?e[1]+" 23:59:59":""},search:function(e){if(this.filter.provinceCode){var t=this;this.filter.pageNo=e,this.dataLoading=!0,this.orderNos="",this.checkedDatas=[],n.default.ajax.get(n.default.baseUrl+"/core/product/sms/list",{params:this.filter}).then(function(e){t.wscCode="",t.dataLoading=!1,e.status==c.ERR_OK?(t.datas=e.data.data.list,t.TotalRecords=e.data.data.total):t.$Message.error(e)}).catch(function(e){console.log(e)})}else this.$Message.error("请先选择通道")},selectItem:function(e){this.checkedDatas=e;var t=[];e.length?(e.map(function(e){t.push(e.orderNo)}),this.orderNos=t.join(",")):this.orderNos=""},changePageSize:function(e){this.filter.pageSize=e,this.search(1)},changePage:function(e){this.search(e)},deleteShow:function(){return this.checkedDatas.length?this.checkedDatas.length>1?void this.$Message.warning("一次只能删除一条订单！"):(this.passWord="",void(this.modalDelete=!0)):void this.$Message.warning("请选择需要删除的订单！")},deleteItem:function(){var e=this;if(!this.passWord)return void this.$Message.warning("请验证当前账户密码！");this.modal_loading=!0;var t=[];if(e.checkedDatas.length>0)for(var o=0;o<e.checkedDatas.length;o++)t.push(e.checkedDatas[o].id);t+=",",t=t.substring(0,t.length-1);var a=d.default.get("user"),r=this.passWord;n.default.ajax.get(n.default.baseUrl+"/core/product/sms/delete",{params:{ids:t,userName:a,passWord:r}}).then(function(t){e.modal_loading=!1,t.data.status==c.ERR_OK?(e.$Message.success("删除成功！"),e.modalDelete=!1,e.search(e.filter.pageNo)):e.$Message.error(t.data.msg)}).catch(function(e){console.log(e)})},exportOut:function(){var e=n.default.baseUrl+"/core/product/sms/export?token="+d.default.get("token")+n.default.parseParam(this.filter);window.location.href=e},addShow:function(){this.modalAdd=!0,this.if_add=!0,this.formItem={customer:d.default.get("user"),provinceCode:"",productCode:"",channelType:"",smsType:"",content:"",remarks:"",spCode:""}},selectComplainTime:function(e){this.formItem.complainTime=e},selectOrderTime:function(e){this.formItem.orderTime=e},handleSubmit:function(e){var t=this,o=this.if_add?"/core/product/sms/add":"/core/product/sms/edit";this.$refs[e].validate(function(e){if(e){var a=t;t.modal_loading=!0,n.default.ajax.get(n.default.baseUrl+o,{params:a.formItem}).then(function(e){a.modal_loading=!1,e.data.status==c.ERR_OK?(a.$Message.success(e.data.msg),a.modalAdd=!1,a.search(1)):a.$Message.error(e.data.msg)}).catch(function(e){console.log(e)})}else t.$Message.error("请填写完整信息!")})},downloadFile:function(e){window.location.href=n.default.baseUrl+"/xjcu/refund/downFile.do?fileName="+e},getProvinceName:function(e,t){var o=this;n.default.ajax.get(n.default.baseUrl+"/system/data/dictionary/list",{params:{dictionaryType:e}}).then(function(e){o[t]=e.data,o.dataLoading=!1}).catch(function(e){console.log(e)})},search2:function(){var e=this,t={pageNo:1,pageSize:100};this.dataLoading=!0,n.default.ajax.get(n.default.baseUrl+"/core/channel/products/list",{params:t}).then(function(t){t.status==c.ERR_OK?(console.log(t),e.producstCode=t.data.data.list,e.dataLoading=!1):(e.$Message.error(t),e.dataLoading=!1)}).catch(function(e){console.log(e)})}},created:function(){var e=this;n.default.ajax.get(n.default.baseUrl+"/kdcu/online/provinceMap/list",{params:{isAll:5}}).then(function(t){e.lists=t.data.data.list;for(var o=0;o<e.lists.length;o++)e.names.push(e.lists[o].name)}),this.getProvinceName("短信通道编码","shortWay"),this.getProvinceName("短信类型","shortType"),this.getProvinceName("省份","provenCodes"),this.getProvinceName("渠道类型","fromWays"),this.search2()}}},960:function(e,t,o){e.exports={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"complain_nation complain_nation_cs"},[o("Collapse",{staticStyle:{margin:"10px 0"},model:{value:e.collapseName,callback:function(t){e.collapseName=t},expression:"collapseName"}},[o("Panel",{attrs:{name:"1"}},[o("div",{staticStyle:{display:"inline-block",float:"left","margin-right":"10px"},on:{click:function(e){e.stopPropagation()}}},[o("Button",{attrs:{type:"success",icon:"plus"},on:{click:e.addShow}},[e._v("新增产品短信")]),e._v(" "),o("Button",{attrs:{type:"error",icon:"close"},on:{click:e.deleteShow}},[e._v("删除产品短信")]),e._v(" "),o("Button",{attrs:{type:"primary",icon:"ios-cloud-download"},on:{click:e.exportOut}},[e._v("导出")])],1),e._v(" "),o("div",{attrs:{slot:"content"},slot:"content"},[o("Select",{staticStyle:{width:"200px"},attrs:{clearable:"",filterable:"",placeholder:"请选择通道"},on:{"on-change":e.filterProductCode},model:{value:e.filter.provinceCode,callback:function(t){e.$set(e.filter,"provinceCode",t)},expression:"filter.provinceCode"}},e._l(e.provenCodes,function(t,a){return o("Option",{key:a,attrs:{value:t.dictionaryCode}},[e._v(e._s(t.dictionaryName))])})),e._v(" "),o("Select",{staticStyle:{width:"350px"},attrs:{clearable:"",filterable:"",placeholder:"请选择产品名称"},model:{value:e.filter.productCode,callback:function(t){e.$set(e.filter,"productCode",t)},expression:"filter.productCode"}},e._l(e.checkedProducstCode,function(t,a){return o("Option",{key:a,attrs:{value:t.productCode}},[e._v(e._s(t.productName))])})),e._v(" "),o("Select",{staticStyle:{width:"200px"},attrs:{clearable:"",filterable:"",placeholder:"请选择渠道类型"},model:{value:e.filter.channelType,callback:function(t){e.$set(e.filter,"channelType",t)},expression:"filter.channelType"}},e._l(e.fromWays,function(t,a){return o("Option",{key:a,attrs:{value:t.dictionaryCode}},[e._v(e._s(t.dictionaryCode))])})),e._v(" "),o("Select",{staticStyle:{width:"200px"},attrs:{clearable:"",filterable:"",placeholder:"请选择短信类型"},model:{value:e.filter.smsType,callback:function(t){e.$set(e.filter,"smsType",t)},expression:"filter.smsType"}},e._l(e.shortType,function(t,a){return o("Option",{key:a,attrs:{value:t.dictionaryName}},[e._v(e._s(t.dictionaryName))])})),e._v(" "),o("Select",{staticStyle:{width:"200px"},attrs:{clearable:"",filterable:"",placeholder:"请选择短信通道编码"},model:{value:e.filter.spCode,callback:function(t){e.$set(e.filter,"spCode",t)},expression:"filter.spCode"}},e._l(e.shortWay,function(t,a){return o("Option",{key:a,attrs:{value:t.dictionaryCode}},[e._v(e._s(t.dictionaryName))])})),e._v(" "),o("Button",{staticStyle:{float:"right"},attrs:{type:"primary",icon:"ios-search"},on:{click:function(t){e.search(1)}}},[e._v("查找")])],1)])],1),e._v(" "),o("Table",{attrs:{columns:e.columns,data:e.datas,loading:e.dataLoading,size:"small"},on:{"on-selection-change":e.selectItem}}),e._v(" "),o("br"),e._v(" "),o("br"),e._v(" "),o("div",{staticClass:"page"},[o("Page",{staticStyle:{display:"inline-block","vertical-align":"middle"},attrs:{total:e.TotalRecords,current:e.filter.pageNo,"page-size":e.filter.pageSize,"show-elevator":"","show-sizer":"",placement:"top","page-size-opts":e.pageConfig},on:{"on-change":e.changePage,"on-page-size-change":e.changePageSize}}),e._v(" "),o("div",{staticClass:"records",staticStyle:{display:"inline-block",height:"32px","line-height":"32px","margin-left":"5%"}},[e._v("\n            当前共"),o("span",{staticStyle:{color:"#f00","font-weight":"bold"}},[e._v(" "+e._s(e.TotalRecords)+" ")]),e._v("条记录，已选定"),o("span",{staticStyle:{color:"#f00","font-weight":"bold"}},[e._v(" "+e._s(e.checkedDatas.length)+" ")]),e._v("条记录\n        ")])],1),e._v(" "),o("Modal",{attrs:{width:"400","mask-closable":!1,"class-name":"vertical-center-modal modalAdd"},model:{value:e.modalAdd,callback:function(t){e.modalAdd=t},expression:"modalAdd"}},[o("p",{staticStyle:{color:"#f60","text-align":"center"},attrs:{slot:"header"},slot:"header"},[o("Icon",{attrs:{type:"information-circled"}}),e._v(" "),o("span",[e._v(e._s(e.if_add?"新增":"修改")+"产品短信")]),e._v(" "),o("span",{staticClass:"customer",staticStyle:{position:"absolute",right:"8%",color:"#333"}},[e._v("\n                客服: "+e._s(e.formItem.customer)+"\n            ")])],1),e._v(" "),o("div",[o("Form",{ref:"formValidate",staticStyle:{width:"100%",margin:"0 auto"},attrs:{model:e.formItem,rules:e.ruleValidate}},[o("FormItem",{directives:[{name:"show",rawName:"v-show",value:e.if_add,expression:"if_add"}],staticStyle:{width:"100%","margin-bottom":"10px"},attrs:{prop:"productCode"}},[o("Select",{attrs:{filterable:"",placeholder:"请选择产品类型"},model:{value:e.formItem.productCode,callback:function(t){e.$set(e.formItem,"productCode",t)},expression:"formItem.productCode"}},e._l(e.producstCode,function(t,a){return o("Option",{key:a,attrs:{value:t.productCode}},[e._v(e._s(t.productName))])}))],1),e._v(" "),o("FormItem",{directives:[{name:"show",rawName:"v-show",value:!e.if_add,expression:"!if_add"}],staticStyle:{width:"100%","margin-bottom":"10px"},attrs:{prop:"productCode"}},[o("Input",{staticStyle:{width:"100%"},attrs:{disabled:"",placeholder:"请选择产品类型"},model:{value:e.formItem.productCode,callback:function(t){e.$set(e.formItem,"productCode",t)},expression:"formItem.productCode"}})],1),e._v(" "),o("FormItem",{directives:[{name:"show",rawName:"v-show",value:e.if_add,expression:"if_add"}],staticStyle:{width:"100%","margin-bottom":"10px"},attrs:{prop:"channelType"}},[o("Select",{attrs:{filterable:"",placeholder:"请选择渠道类型"},model:{value:e.formItem.channelType,callback:function(t){e.$set(e.formItem,"channelType",t)},expression:"formItem.channelType"}},e._l(e.fromWays,function(t,a){return o("Option",{key:a,attrs:{value:t.dictionaryCode}},[e._v(e._s(t.dictionaryCode))])}))],1),e._v(" "),o("FormItem",{directives:[{name:"show",rawName:"v-show",value:!e.if_add,expression:"!if_add"}],staticStyle:{width:"100%","margin-bottom":"10px"},attrs:{prop:"channelType"}},[o("Input",{staticStyle:{width:"100%"},attrs:{disabled:"",placeholder:"请选择渠道类型"},model:{value:e.formItem.channelType,callback:function(t){e.$set(e.formItem,"channelType",t)},expression:"formItem.channelType"}})],1),e._v(" "),o("FormItem",{directives:[{name:"show",rawName:"v-show",value:e.if_add,expression:"if_add"}],staticStyle:{width:"100%","margin-bottom":"10px"}},[o("Select",{attrs:{filterable:"",placeholder:"请选择省份"},model:{value:e.formItem.provinceCode,callback:function(t){e.$set(e.formItem,"provinceCode",t)},expression:"formItem.provinceCode"}},e._l(e.provenCodes,function(t,a){return o("Option",{key:a,attrs:{value:t.dictionaryCode}},[e._v(e._s(t.dictionaryName))])}))],1),e._v(" "),o("FormItem",{directives:[{name:"show",rawName:"v-show",value:!e.if_add,expression:"!if_add"}],staticStyle:{width:"100%","margin-bottom":"10px"},attrs:{prop:"provinceCode"}},[o("Input",{staticStyle:{width:"100%"},attrs:{disabled:"",placeholder:"请选择省份"},model:{value:e.formItem.provinceCode,callback:function(t){e.$set(e.formItem,"provinceCode",t)},expression:"formItem.provinceCode"}})],1),e._v(" "),o("FormItem",{directives:[{name:"show",rawName:"v-show",value:e.if_add,expression:"if_add"}],staticStyle:{width:"100%","margin-bottom":"10px"}},[o("Select",{attrs:{filterable:"",placeholder:"请选择短信类型"},model:{value:e.formItem.smsType,callback:function(t){e.$set(e.formItem,"smsType",t)},expression:"formItem.smsType"}},e._l(e.shortType,function(t,a){return o("Option",{key:a,attrs:{value:t.dictionaryName}},[e._v(e._s(t.dictionaryName))])}))],1),e._v(" "),o("FormItem",{directives:[{name:"show",rawName:"v-show",value:!e.if_add,expression:"!if_add"}],staticStyle:{width:"100%","margin-bottom":"10px"}},[o("Input",{staticStyle:{width:"100%"},attrs:{disabled:"",placeholder:"请选择短信类型"},model:{value:e.formItem.smsType,callback:function(t){e.$set(e.formItem,"smsType",t)},expression:"formItem.smsType"}})],1),e._v(" "),o("FormItem",{directives:[{name:"show",rawName:"v-show",value:e.if_add,expression:"if_add"}],staticStyle:{width:"100%","margin-bottom":"10px"}},[o("Select",{attrs:{filterable:"",placeholder:"请选择短信通道编码"},model:{value:e.formItem.spCode,callback:function(t){e.$set(e.formItem,"spCode",t)},expression:"formItem.spCode"}},e._l(e.shortWay,function(t,a){return o("Option",{key:a,attrs:{value:t.dictionaryCode}},[e._v(e._s(t.dictionaryName))])}))],1),e._v(" "),o("FormItem",{directives:[{name:"show",rawName:"v-show",value:!e.if_add,expression:"!if_add"}],staticStyle:{width:"100%","margin-bottom":"10px"}},[o("Input",{staticStyle:{width:"100%"},attrs:{disabled:"",placeholder:"请选择短信通道编码"},model:{value:e.formItem.spCode,callback:function(t){e.$set(e.formItem,"spCode",t)},expression:"formItem.spCode"}})],1),e._v(" "),o("FormItem",{staticStyle:{width:"100%","margin-bottom":"10px"}},[o("span",[e._v("短信内容：")]),o("br"),e._v(" "),o("Input",{attrs:{type:"textarea",rows:4,placeholder:"请输入短信内容"},model:{value:e.formItem.content,callback:function(t){e.$set(e.formItem,"content",t)},expression:"formItem.content"}})],1),e._v(" "),o("FormItem",{staticStyle:{width:"100%","margin-bottom":"10px"}},[o("span",[e._v("备注：")]),o("br"),e._v(" "),o("Input",{attrs:{type:"textarea",rows:1,placeholder:"请输入备注"},model:{value:e.formItem.remarks,callback:function(t){e.$set(e.formItem,"remarks",t)},expression:"formItem.remarks"}})],1)],1)],1),e._v(" "),o("div",{staticStyle:{"text-align":"right"},attrs:{slot:"footer"},slot:"footer"},[o("Button",{attrs:{type:"success",loading:e.modal_loading},on:{click:function(t){e.handleSubmit("formValidate")}}},[e._v("提交")]),e._v(" "),o("Button",{staticStyle:{"margin-left":"8px"},attrs:{type:"ghost"},on:{click:function(t){e.modalAdd=!1}}},[e._v("取消")])],1)]),e._v(" "),o("Modal",{attrs:{width:"320"},model:{value:e.modalDelete,callback:function(t){e.modalDelete=t},expression:"modalDelete"}},[o("p",{staticStyle:{color:"#f60","text-align":"center"},attrs:{slot:"header"},slot:"header"},[o("Icon",{attrs:{type:"information-circled"}}),e._v(" "),o("span",[e._v("删除订单")])],1),e._v(" "),o("div",{staticStyle:{"text-align":"center"}},[o("Input",{attrs:{type:"password",autosize:!0,placeholder:"请验证当前用户密码"},model:{value:e.passWord,callback:function(t){e.passWord=t},expression:"passWord"}})],1),e._v(" "),o("div",{attrs:{slot:"footer"},slot:"footer"},[o("Button",{attrs:{type:"primary",size:"large",long:"",loading:e.modal_loading},on:{click:e.deleteItem}},[e._v("确认")])],1)])],1)},staticRenderFns:[]},e.exports.render._withStripped=!0}});