webpackJsonp([9],{282:function(e,t,a){a(879),a(880);var l=a(4)(a(881),a(882),"data-v-c5d4b68c",null);l.options.__file="D:\\项目\\operate_oss\\src\\views\\phonehall\\whitelist.vue",l.esModule&&Object.keys(l.esModule).some(function(e){return"default"!==e&&"__esModule"!==e})&&console.error("named exports are not supported in *.vue files."),l.options.functional&&console.error("[vue-loader] whitelist.vue: functional components are not supported with templates, they should use render functions."),e.exports=l.exports},879:function(e,t){},880:function(e,t){},881:function(e,t,a){"use strict";function l(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=a(14),i=l(s),o=a(7),r=l(o),n=a(62);t.default={data:function(){var e=this;return{beforeChanged:"",lists:[],names:[],wscCode:"",datalen:[{value:"21亲情号",label:"21亲情号",children:[{value:"qin123456",label:"qin123456"}]},{value:"新入网群",label:"新入网群",children:[{value:"new12345",label:"new12345"}]},{value:"沉默用户",label:"沉默用户",children:[{value:"old123456",label:"old123456"}]},{value:"生日",label:"生日",children:[{value:"bir12345",label:"bir12345",children:[{value:"生日新入网用户",label:"生日新入网用户"},{value:"生日沉默用户",label:"生日沉默用户"},{value:"生日其他用户",label:"生日其他用户"}]}]},{value:"周年",label:"周年",children:[{value:"ann12345",label:"ann12345",children:[{value:"周年新入网用户",label:"周年新入网用户"},{value:"周年沉默用户",label:"周年沉默用户"},{value:"周年送祝福用户",label:"周年送祝福用户"}]}]}],loading:"",if_add:!0,collapseName:"1",remark:"",initTime:(new Date).getFullYear()+"-"+((new Date).getMonth()+1)+"-"+(new Date).getDate(),ruleValidate:{wscCode:[{required:!0,message:" ",trigger:"blur"}],isEnable:[{required:!0,message:" ",trigger:"change"}],flagType:[{required:!0,message:" ",trigger:"blur"}],whiteId:[{required:!0,message:" ",trigger:"blur"}]},cityList:[],modalDelete:!1,passWord:"",modalAdd:!1,modal_loading:!1,formItem:{},dataLoading:!1,filter:{pageNo:1,pageSize:n.pageSize,wscCode:"",code:"",isEnable:"",whiteId:"",dataType:"",name:"",flagType:"",remarks:""},TotalRecords:0,columns:[{type:"selection",width:60,align:"center"},{title:"沃视窗编码",align:"center",key:"wscCode"},{title:"白名单ID",align:"center",key:"whiteId"},{title:"标志类型",align:"center",key:"flagType"},{title:"数据类型",align:"center",key:"dataType"},{title:"白名单ID状态",align:"center",key:"isEnable"},{title:"备注",align:"center",key:"remarks"},{title:"Action",key:"action",width:150,align:"center",render:function(t,a){return t("div",[t("Button",{props:{type:"primary",size:"small"},style:{marginRight:"5px"},on:{click:function(){var t=a.row.id;i.default.changeState.call(e,"开启",a,t)}}},"开启"),t("Button",{props:{type:"error",size:"small"},style:{marginRight:"5px"},on:{click:function(){var t=a.row.id;i.default.changeState.call(e,"关闭",a,t)}}},"关闭"),t("Button",{props:{type:"warning",size:"small"},on:{click:function(){var t=e;e.if_add=!1;var l=a.index;e.beforeChanged=t.datas[l],console.log(t.datas);var s=e.beforeChanged.remarks.split("-");if(s.length>0){s=s[s.length-1]}else s=e.beforeChanged.remarks;e.modalAdd=!0,e.formItem={customer:r.default.get("user"),mobileNumber:"",province:"",flagType:e.beforeChanged.flagType,isEnable:e.beforeChanged.isEnable,wscCode:e.beforeChanged.wscCode,name:"",dataType:e.beforeChanged.dataType,whiteId:e.beforeChanged.whiteId,returnText:"用户否认订购行为。",remarks:s,id:e.beforeChanged.id},"关闭"==e.beforeChanged.isEnable?e.formItem.isEnable=0:"开启"==e.beforeChanged.isEnable&&(e.formItem.isEnable=1)}}},"修改")])}}],datas:[],orderNos:"",checkedDatas:[],pageConfig:[8,10,15,18,20,300]}},methods:{showWscCode:function(e){for(var t=this,a=0;a<t.lists.length;a++)t.lists[a].name==e&&(t.filter.wscCode=t.lists[a].wscCode,t.formItem.wscCode=t.lists[a].wscCode)},changeValue:function(e){this.remark=e},changeComplainTime:function(e){this.filter.complainStartTime=e[0]?e[0]+" 00:00:00":"",this.filter.complainEndTime=e[1]?e[1]+" 23:59:59":""},changeOrderTime:function(e){this.filter.orderStartTime=e[0]?e[0]+" 00:00:00":"",this.filter.orderEndTime=e[1]?e[1]+" 23:59:59":""},search:function(e){var t=this;this.filter.pageNo=e,this.dataLoading=!0,this.orderNos="",this.checkedDatas=[],i.default.ajax.get(i.default.baseUrl+"/kdcu/online_retailers/listid/list",{params:this.filter}).then(function(e){if(t.wscCode="",t.dataLoading=!1,e.data.status==n.ERR_OK){for(var a=0;a<e.data.data.list.length;a++)0==e.data.data.list[a].isEnable?e.data.data.list[a].isEnable="关闭":1==e.data.data.list[a].isEnable&&(e.data.data.list[a].isEnable="开启"),"NO"==e.data.data.list[a].flagType&&(e.data.data.list[a].flagType="未配置");t.wscCodes=[],t.filter.wscCode="",t.datas=e.data.data.list;for(var l=0;l<t.datas.length;l++)t.wscCodes.push(t.datas[l].wscCode);t.TotalRecords=e.data.data.total}else t.$Message.error(e.data.msg)}).catch(function(e){console.log(e)})},selectItem:function(e){this.checkedDatas=e;var t=[];e.length?(e.map(function(e){t.push(e.orderNo)}),this.orderNos=t.join(",")):this.orderNos=""},changePageSize:function(e){this.filter.pageSize=e,this.search(1)},changePage:function(e){this.search(e)},deleteShow:function(){if(!this.checkedDatas.length)return void this.$Message.warning("请选择需要删除的订单！");this.passWord="",this.modalDelete=!0},deleteItem:function(){var e=this;if(!this.passWord)return void this.$Message.warning("请验证当前账户密码！");this.modal_loading=!0;var t=[];if(e.checkedDatas.length>0)for(var a=0;a<e.checkedDatas.length;a++)t.push(e.checkedDatas[a].id);t+=",",t=t.substring(0,t.length-1);var l=r.default.get("user"),s=this.passWord;i.default.ajax.get(i.default.baseUrl+"/kdcu/online_retailers/listid/delete",{params:{ids:t,userName:l,passWord:s}}).then(function(t){e.modal_loading=!1,t.data.status==n.ERR_OK?(e.$Message.success("删除成功！"),e.modalDelete=!1,e.search(e.filter.pageNo)):e.$Message.error(t.data.msg)}).catch(function(e){console.log(e)})},addShow:function(){this.modalAdd=!0,this.if_add=!0,this.formItem={customer:r.default.get("user"),dataType:"",isEnable:"",wscCode:"",id:"",flagType:"",whiteId:"",remarks:""}},selectComplainTime:function(e){this.formItem.complainTime=e},selectOrderTime:function(e){this.formItem.orderTime=e},handleSubmit:function(e){var t=this,a=this.if_add?"/kdcu/online_retailers/listid/add":"/kdcu/online_retailers/listid/edit";this.$refs[e].validate(function(e){if(e){var l=t.remark.length,s=t;t.if_add&&(l>3?(s.formItem.flagType="1",s.formItem.remarks=s.remark[l-1],s.formItem.dataType=s.remark[0]):(s.formItem.flagType="NO",s.formItem.remarks=s.remark[0],s.formItem.dataType=s.remark[1])),"未配置"==s.formItem.flagType&&(s.formItem.flagType="NO"),t.modal_loading=!0,i.default.ajax.get(i.default.baseUrl+a,{params:s.formItem}).then(function(e){s.modal_loading=!1,e.data.status==n.ERR_OK?(s.$Message.success(e.data.msg),s.modalAdd=!1,s.filter.wscCode="",s.search(1)):s.$Message.error(e.data.msg)}).catch(function(e){console.log(e)})}else t.$Message.error("请填写完整信息!")})},downloadFile:function(e){window.location.href=i.default.baseUrl+"/xjcu/refund/downFile.do?fileName="+e}},created:function(){this.search(1);var e=this;i.default.ajax.get(i.default.baseUrl+"/kdcu/online/provinceMap/list",{params:{isAll:5}}).then(function(t){e.lists=t.data.data.list;for(var a=0;a<e.lists.length;a++)e.names.push(e.lists[a].name)})}}},882:function(e,t,a){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"complain_nation"},[a("Collapse",{staticStyle:{margin:"10px 0"},model:{value:e.collapseName,callback:function(t){e.collapseName=t},expression:"collapseName"}},[a("Panel",{attrs:{name:"1"}},[a("div",{staticStyle:{display:"inline-block",float:"left","margin-right":"10px"},on:{click:function(e){e.stopPropagation()}}},[a("Button",{attrs:{type:"success",icon:"plus"},on:{click:e.addShow}},[e._v("新增白名单ID")]),e._v(" "),a("Button",{attrs:{type:"error",icon:"close"},on:{click:e.deleteShow}},[e._v("删除白名单ID")])],1),e._v(" "),a("div",{attrs:{slot:"content"},slot:"content"},[a("Select",{staticStyle:{width:"500px"},attrs:{filterable:"",placeholder:"请选择查看省份"},model:{value:e.wscCode,callback:function(t){e.wscCode=t},expression:"wscCode"}},e._l(e.names,function(t,l){return a("Option",{key:l,attrs:{value:t}},[e._v(e._s(t))])})),e._v(" "),a("Input",{staticStyle:{width:"200px"},attrs:{placeholder:"请输入：白名单id",clearable:""},model:{value:e.filter.whiteId,callback:function(t){e.$set(e.filter,"whiteId",t)},expression:"filter.whiteId"}}),e._v(" "),a("Input",{staticStyle:{width:"200px"},attrs:{placeholder:"请输入：标志类型",clearable:""},model:{value:e.filter.flagType,callback:function(t){e.$set(e.filter,"flagType",t)},expression:"filter.flagType"}}),e._v(" "),a("Input",{staticStyle:{width:"200px"},attrs:{placeholder:"请输入：数据类型",clearable:""},model:{value:e.filter.dataType,callback:function(t){e.$set(e.filter,"dataType",t)},expression:"filter.dataType"}}),e._v(" "),a("Select",{staticStyle:{width:"100px","margin-right":"10px"},attrs:{clearable:!0,placeholder:"ID状态"},model:{value:e.filter.isEnable,callback:function(t){e.$set(e.filter,"isEnable",t)},expression:"filter.isEnable"}},[a("Option",{attrs:{value:"0"}},[e._v("关闭")]),e._v(" "),a("Option",{attrs:{value:"1"}},[e._v("开启")])],1),e._v(" "),a("Button",{staticStyle:{float:"right"},attrs:{type:"primary",icon:"ios-search"},on:{click:function(t){e.search(1)}}},[e._v("查找")])],1)])],1),e._v(" "),a("Table",{attrs:{columns:e.columns,data:e.datas,loading:e.dataLoading,size:"small"},on:{"on-selection-change":e.selectItem}}),e._v(" "),a("br"),e._v(" "),a("br"),e._v(" "),a("div",{staticClass:"page"},[a("Page",{staticStyle:{display:"inline-block","vertical-align":"middle"},attrs:{total:e.TotalRecords,current:e.filter.pageNo,"page-size":e.filter.pageSize,"show-elevator":"","show-sizer":"",placement:"top","page-size-opts":e.pageConfig},on:{"on-change":e.changePage,"on-page-size-change":e.changePageSize}}),e._v(" "),a("div",{staticClass:"records",staticStyle:{display:"inline-block",height:"32px","line-height":"32px","margin-left":"5%"}},[e._v("\n            当前共"),a("span",{staticStyle:{color:"#f00","font-weight":"bold"}},[e._v(" "+e._s(e.TotalRecords)+" ")]),e._v("条记录，已选定"),a("span",{staticStyle:{color:"#f00","font-weight":"bold"}},[e._v(" "+e._s(e.checkedDatas.length)+" ")]),e._v("条记录\n        ")])],1),e._v(" "),a("Modal",{attrs:{width:"660","mask-closable":!1,"class-name":"vertical-center-modal modalAdd"},model:{value:e.modalAdd,callback:function(t){e.modalAdd=t},expression:"modalAdd"}},[a("p",{staticStyle:{color:"#f60","text-align":"center"},attrs:{slot:"header"},slot:"header"},[a("Icon",{attrs:{type:"information-circled"}}),e._v(" "),a("span",[e._v(e._s(e.if_add?"新增":"修改")+"白名单ID")]),e._v(" "),a("span",{staticClass:"customer",staticStyle:{position:"absolute",right:"8%",color:"#333"}},[e._v("\n                客服: "+e._s(e.formItem.customer)+"\n            ")])],1),e._v(" "),a("div",[a("Form",{ref:"formValidate",staticStyle:{width:"100%",margin:"0 auto"},attrs:{model:e.formItem,rules:e.ruleValidate,"label-width":120}},[a("FormItem",{staticStyle:{width:"60%"},attrs:{label:"省份名称",prop:"wscCode"}},[a("Input",{directives:[{name:"show",rawName:"v-show",value:!e.if_add,expression:"!if_add"}],staticStyle:{width:"100px"},attrs:{disabled:!0},model:{value:e.formItem.wscCode,callback:function(t){e.$set(e.formItem,"wscCode",t)},expression:"formItem.wscCode"}}),e._v(" "),a("Select",{staticStyle:{width:"100px"},attrs:{filterable:"",clearable:!0,placeholder:"请选择省份"},on:{"on-change":e.showWscCode},model:{value:e.wscCode,callback:function(t){e.wscCode=t},expression:"wscCode"}},e._l(e.names,function(t,l){return a("Option",{key:l,attrs:{value:t}},[e._v(e._s(t))])}))],1),e._v(" "),a("FormItem",{staticStyle:{width:"60%"},attrs:{label:"白名单ID",prop:"whiteId"}},[a("Input",{attrs:{placeholder:"白名单ID,如：101"},model:{value:e.formItem.whiteId,callback:function(t){e.$set(e.formItem,"whiteId",t)},expression:"formItem.whiteId"}})],1),e._v(" "),a("FormItem",{directives:[{name:"show",rawName:"v-show",value:e.if_add,expression:"if_add"}],staticStyle:{width:"60%"},attrs:{label:"标志类型"}},[a("Cascader",{attrs:{data:e.datalen,trigger:"click"},on:{"on-change":e.changeValue}})],1),e._v(" "),a("FormItem",{directives:[{name:"show",rawName:"v-show",value:!e.if_add,expression:"!if_add"}],staticStyle:{width:"60%"},attrs:{label:"数据类型"}},[a("Input",{attrs:{placeholder:"数据类型,如：101"},model:{value:e.formItem.dataType,callback:function(t){e.$set(e.formItem,"dataType",t)},expression:"formItem.dataType"}})],1),e._v(" "),a("FormItem",{directives:[{name:"show",rawName:"v-show",value:!e.if_add,expression:"!if_add"}],staticStyle:{width:"60%"},attrs:{label:"标志类型"}},[a("Input",{attrs:{placeholder:"数据类型,如：101"},model:{value:e.formItem.flagType,callback:function(t){e.$set(e.formItem,"flagType",t)},expression:"formItem.flagType"}})],1),e._v(" "),a("FormItem",{directives:[{name:"show",rawName:"v-show",value:!e.if_add,expression:"!if_add"}],staticStyle:{width:"60%"},attrs:{label:"备注"}},[a("Input",{attrs:{placeholder:"数据类型,如：101"},model:{value:e.formItem.remarks,callback:function(t){e.$set(e.formItem,"remarks",t)},expression:"formItem.remarks"}})],1),e._v(" "),a("FormItem",{staticStyle:{width:"60%"},attrs:{label:"是否启用"}},[a("Input",{directives:[{name:"show",rawName:"v-show",value:!e.if_add,expression:"!if_add"}],staticStyle:{width:"100px"},attrs:{disabled:!0},model:{value:0==e.formItem.isEnable?"关闭":"开启",callback:function(t){e.$set(e.formItem,"isEnable==0?'关闭':'开启'",t)},expression:"formItem.isEnable==0?'关闭':'开启'"}}),e._v(" "),a("Select",{staticStyle:{width:"100px"},attrs:{clearable:!0,placeholder:"请选择状态"},model:{value:e.formItem.isEnable,callback:function(t){e.$set(e.formItem,"isEnable",t)},expression:"formItem.isEnable"}},[a("Option",{attrs:{value:"0"}},[e._v("关闭")]),e._v(" "),a("Option",{attrs:{value:"1"}},[e._v("启用")])],1)],1)],1)],1),e._v(" "),a("div",{staticStyle:{"text-align":"right"},attrs:{slot:"footer"},slot:"footer"},[a("Button",{attrs:{type:"success",loading:e.modal_loading},on:{click:function(t){e.handleSubmit("formValidate")}}},[e._v("提交")]),e._v(" "),a("Button",{staticStyle:{"margin-left":"8px"},attrs:{type:"ghost"},on:{click:function(t){e.modalAdd=!1}}},[e._v("取消")])],1)]),e._v(" "),a("Modal",{attrs:{width:"320"},model:{value:e.modalDelete,callback:function(t){e.modalDelete=t},expression:"modalDelete"}},[a("p",{staticStyle:{color:"#f60","text-align":"center"},attrs:{slot:"header"},slot:"header"},[a("Icon",{attrs:{type:"information-circled"}}),e._v(" "),a("span",[e._v("删除订单")])],1),e._v(" "),a("div",{staticStyle:{"text-align":"center"}},[a("Input",{attrs:{type:"password",autosize:!0,placeholder:"请验证当前用户密码"},model:{value:e.passWord,callback:function(t){e.passWord=t},expression:"passWord"}})],1),e._v(" "),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("Button",{attrs:{type:"primary",size:"large",long:"",loading:e.modal_loading},on:{click:e.deleteItem}},[e._v("确认")])],1)])],1)},staticRenderFns:[]},e.exports.render._withStripped=!0}});